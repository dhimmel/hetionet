# Neo4j Deployment

This directory includes files to deploy neo4j-hetionet on Ubuntu 18.04 box.

## Prerequisites of Deployment Box:

- OS: Ubuntu 18.04 or later
- User account `ubuntu` that has `sudo` privilege

## Deployment Steps:

Open `install_ssl.sh` and edit the values for `EMAIL` and `SSL_DOMAIN` in:

```shell
EMAIL="team@greenelab.com"  # email address associated with SSL certificate
SSL_DOMAIN="neo4j.het.io"   # SSL domain name
```

Then type the following command on the deplyment box:

```shell
./setup.sh
```

Here is a summary of what this script does:

- Install a daily cron job to upgrade packages using `apt` command
- Install the latest Docker CE (Community Edition)
- Copy docker-related scripts into `/home/ubuntu/docker-scripts/` directory
- Install SSL certificates issed by [Let's Encrypt](https://letsencrypt.org/)

Reboot the deployment box to ensure that new configurations will become effective, then log in as `ubuntu`, and type:

```shell
cd ~/docker-scripts/
./run-docker.sh
```

Wait for ~15 minutes before the web server is up, because the server needs to initialize the databases and guides.

Please also make sure that your firewall setup on deployment box allows inbound traffic to port **7687**.

To reconfigure SSL later, please reset `EMAIL` and `SSL_DOMAIN` as described earlier, then type:

```shell
./install_ssl.sh
```
